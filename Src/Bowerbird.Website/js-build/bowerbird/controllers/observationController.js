define(["jquery","underscore","backbone","app","views/observationlayoutview","models/observation"],function(a,b,c,d,e,f){var g={},h=function(a){var b=new e({model:a});return d.content[d.getShowViewMethodName("observations")](b),d.isPrerendering("observations")&&b.showBootstrappedDetails(),b},i=function(b){var c=new a.Deferred;if(d.isPrerendering("observations"))c.resolve(d.prerenderedView.data);else{var e={};b&&(e.id=b),a.ajax({url:"/observations/create",data:e}).done(function(a){c.resolve(a.Model)})}return c.promise()};return g.showObservationForm=function(b){a.when(i(b)).done(function(a){var b=new f(a.Observation),c=h(b);c.showObservationForm(b,a.Categories),d.setPrerenderComplete()})},g})