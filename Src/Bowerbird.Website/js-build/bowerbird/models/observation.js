define(["jquery","underscore","backbone","app","collections/projectcollection","collections/mediaresourcecollection"],function(a,b,c,d,e,f){var g=c.Model.extend({defaults:{Title:"",ObservedOn:null,Address:"",Latitude:null,Longitude:null,Category:"",AnonymiseLocation:!1,Projects:[],IsIdentificationRequired:!1,Media:[]},urlRoot:"/observations",idAttribute:"Id",initialize:function(a){this.mediaResources=new f},toJSON:function(){return{Title:this.get("Title"),ObservedOn:this.get("ObservedOn"),Address:this.get("Address"),Latitude:this.get("Latitude"),Longitude:this.get("Longitude"),Category:this.get("Category"),AnonymiseLocation:this.get("AnonymiseLocation"),Projects:this.get("Projects"),IsIdentificationRequired:this.get("IsIdentificationRequired"),Media:this.get("Media")}},addProject:function(a){var b=this.get("Projects");b.push(a),this.set("Projects",b)},removeProject:function(a){var c=this.get("Projects");this.set("Projects",b.without(c,a))},addMediaResource:function(a){a.on("change",this
._setMedia,this),this.mediaResources.add(a),this._setMedia()},removeMediaResource:function(a){this.mediaResources.remove(this.mediaResources.get(a)),this._setMedia()},_setMedia:function(){var a=this.mediaResources.map(function(a){return{MediaResourceId:a.id,Description:"stuff",Licence:"licenceX"}});this.set("Media",a)}});return g})