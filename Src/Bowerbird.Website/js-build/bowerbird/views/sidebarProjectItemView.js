define(["jquery","underscore","backbone","app","models/project"],function(a,b,c,d,e){var f=c.Marionette.ItemView.extend({tagName:"li",className:"menu-group-item",template:"SidebarProjectItem",events:{"click .chat-menu-item":"startChat","click .sub-menu-button":"showMenu","click .sub-menu-button li":"selectMenuItem"},onRender:function(){var b=this;a(this.el).children("a").on("click",function(c){return c.preventDefault(),d.groupUserRouter.navigate(a(this).attr("href")),d.vent.trigger("project:show:stream",b.model.id),!1})},serializeData:function(){return{Id:this.model.id,Name:this.model.get("Name"),Avatar:this.model.get("Avatar"),Permissions:{UpdateProject:d.authenticatedUser.hasGroupPermission(this.model.id,"permissions/updateproject")}}},showMenu:function(b){a(".sub-menu-button").removeClass("active"),a(b.currentTarget).addClass("active"),b.stopPropagation()},selectMenuItem:function(b){a(".sub-menu-button").removeClass("active"),b.stopPropagation()},startChat:function(a){var b=d.chats.get
(this.sidebarItem.Id);b==null&&(b=new Bowerbird.Models.GroupChat({Id:this.sidebarItem.Id,Group:this.sidebarItem}),d.chats.add(b)),d.chatRouter.joinChat(b)}});return f})